var g_reference_url=null,g_rowtypes=null,g_rowtypes_initial=null,g_inputtype=null,g_switchedtabs=!1,g_lastinput=null,g_lastactive=null,g_lastchoose=null,g_lastinputid=null,g_lastmoreopen=null,g_lastshownavbar=null,g_initial_searchtext=null,verbose=!1,verbose=!0,popup_actions_cfg={sites:{str:gs("Sites"),id:"popupaction_sites"},savesite:{str:gs("Save Site"),id:"popupaction_savesite"},generate:{str:gs("Generate"),id:"popupaction_generate"},formfill:{str:gs("Form Fill Profile"),id:"popupaction_formfillprofile"},
never:{str:gs("Disable"),id:"popupaction_never"},more:{str:gs("More"),id:"popupaction_more"}},g_ctr_dofilter=0,g_ctr_poll=0,g_ctr_pollresponse=0,g_icon_number_hint=!0,g_more_close_on_cancel=!1,g_more_enable_return=!0,g_creditcard_profile_annotate=!0,g_nomatches_triggers_save=!0,g_selected_never_row=null,g_selected_more_row=null,g_more_submenu_aid=null,g_more_submenu_ffid=null,g_savesitesuperbox=!0,g_clickable_input_on_password=!0;document.addEventListener("DOMContentLoaded",function(){loadit()});
function loadit(){g_ischrome?(L("IF -> BG : cmd=getpopupfilldata"),chrome.extension.sendRequest({cmd:"getpopupfilldata"},function(a){L("BG -> IF : response to getpopupfilldata");null==a||null==a.popuphtml||0==a.popuphtml.length?closePopups():(translationInit(a.ff_firstname_regexp,a.ff_middlename_regexp,a.ff_lastname_regexp,a.ff_username_regexp,a.ff_email_regexp,a.ff_zip_regexp,a.ff_country_regexp,a.ff_currpass_regexp),doInit(a.url,a.rowtype,a.ask_generate,a.popuphtml,a.can_copy_clipboard,a.ask_save,
a.lastpass_username,a.inputtype))})):(safari.self.removeEventListener("message",handleMessage,!1),safari.self.addEventListener("message",handleMessage,!1),safari.self.tab.dispatchMessage("getpopupfilldata",{}));g_pollid=setInterval(function(){getInputPoll()},100);notifybg_create_ack()}var KEY_UP=38,KEY_DOWN=40,KEY_ENTER=13,ELEMENT_NODE=1,KEY_ESCAPE=27;function keypress_handler(a){a.keyCode==KEY_ESCAPE&&closePopups();return!1}
function neverdomain_handler(){g_do_nevershowicons?sendRequest({cmd:"neverdomain",url:g_reference_url,fromshowicons:1,frompopupiframe:1}):"sites"==g_rowtypes?0<g_datarowcount?sendRequest({cmd:"neverdomain",url:g_reference_url,fromautofill:1,frompopupiframe:1}):sendRequest({cmd:"neverdomain",url:g_reference_url,fromsave:1,frompopupiframe:1}):"formfills"==g_rowtypes?sendRequest({cmd:"neverdomain",url:g_reference_url,fromformfill:1,frompopupiframe:1}):"ask_generate"==g_rowtypes&&sendRequest({cmd:"neverdomain",
url:g_reference_url,fromgenerate:1,frompopupiframe:1});closePopups()}
function neverpage_handler(){g_do_nevershowicons?sendRequest({cmd:"neverpage",url:g_reference_url,fromshowicons:1,frompopupiframe:1}):"sites"==g_rowtypes?0<g_datarowcount?sendRequest({cmd:"neverpage",url:g_reference_url,fromautofill:1,frompopupiframe:1}):sendRequest({cmd:"neverpage",url:g_reference_url,fromsave:1,frompopupiframe:1}):"formfills"==g_rowtypes?sendRequest({cmd:"neverpage",url:g_reference_url,fromformfill:1,frompopupiframe:1}):"ask_generate"==g_rowtypes&&sendRequest({cmd:"neverpage",url:g_reference_url,
fromgenerate:1,frompopupiframe:1});closePopups()}function neverautofill_handler(){sendRequest({cmd:"neverautofill",url:g_reference_url,frompopupiframe:1});closePopups()}function savesite_popupaction(){sendRequest({cmd:"savesiteicon"});closePopups()}function autofill(a){sendRequest({cmd:"autofillaid",aid:a});closePopups()}function autologin(a){sendRequest({cmd:"autologinaid",aid:a});closePopups()}function fillform(a){sendRequest({cmd:"fillformffid",ffid:a});closePopups()}
function notifybg_create_ack(){sendRequest({cmd:"popupfillscreateack"})}function closePopups(){onHideGenerateIFrame();sendRequest({cmd:"closepopupfills"})}function sendRequest(a){if(null!=a)if(a.cmd&&"popupfillinputget"!=a.cmd&&"popupfilliconnumber"!=a.cmd&&L("IF -> BG : cmd="+a.cmd),g_ischrome)try{chrome.extension.sendRequest(a,function(){})}catch(b){}else g_issafari&&safari.self.tab.dispatchMessage(a.cmd,a)}
function handleMessage(a){"message"==a.name&&"gotpopupfillinput"!=a.message.cmd&&L("BG -> IF : cmd="+a.message.cmd);if("gotpopupfilldata"==a.name||"gotpopupfilldata"==a.message.cmd)translationInit(a.message.ff_firstname_regexp,a.message.ff_middlename_regexp,a.message.ff_lastname_regexp,a.message.ff_username_regexp,a.message.ff_email_regexp,a.message.ff_zip_regexp,a.message.ff_country_regexp,a.message.ff_currpass_regexp),doInit(a.message.url,a.message.rowtype,a.message.ask_generate,a.message.html,
a.message.can_copy_clipboard,a.message.asksave,a.message.lastpass_username,a.message.inputtype);else if("gotpopupfillinput"==a.name||"gotpopupfillinput"==a.message.cmd)null==g_initial_searchtext&&(g_initial_searchtext=a.message.inputstr),g_ctr_pollresponse++,(g_switchedtabs||a.message.inputstr!=g_lastinput||g_lastactive!=a.message.active||a.message.inputid!=g_lastinputid||a.message.moreopen!=g_lastmoreopen||a.message.shownavbar!=g_lastshownavbar||a.message.choose!=g_lastchoose)&&dofilter(a.message.inputstr,
a.message.inputid,a.message.active,a.message.choose,a.message.moreopen,SEARCH_SITE_AND_USER,a.message.issaveall,a.message.inputtype,a.message.shownavbar),g_lastinput=a.message.inputstr,g_lastinputid=a.message.inputid,g_lastactive=a.message.active,g_lastchoose=a.message.choose,g_lastmoreopen=a.message.moreopen,g_lastshownavbar=a.message.shownavbar,g_switchedtabs=!1;else if("gotpopupfillgenerateprefs"==a.name||"gotpopupfillgenerateprefs"==a.message.cmd)null==a.message.prefstr||0>=a.message.prefstr.length?
verbose_log("unable to get prefs from BG"):handleGotGeneratePrefs(a.message.prefstr,a.message.genpwstr);else if("gotpopupfillsave"==a.name||"gotpopupfillsave"==a.message.cmd)null!=a.message.formdata2?populateSave(a.message):null!=a.message.close?closePopups():pollSaveSafari()}function pollSaveSafari(){g_pollSaveSafari_ctr<g_pollSave_max_retry?(g_pollSaveSafari_ctr++,setTimeout(function(){sendRequest({cmd:"popupfillsaveget"})},100)):verbose_log("failed to get form information from CS")}
var g_text_created_popup=!1;
function dofilter(a,b,c,d,f,h,j,e,q){function l(a){r&&verbose_log(a)}g_ctr_dofilter++;var r=!1;l("dofilter called with SEARCH string "+a);null==a&&(a="");if("savesite"==g_currenttab&&!j)e&&("text"==e||"email"==e||"tel"==e)?document.getElementById("u")&&(document.getElementById("u").value=a):e&&"password"==e&&document.getElementById("p")&&(document.getElementById("p").value=a);else{var m=document.getElementsByTagName("td"),n=[];b=[];g_switchedtabs&&(g_selected_row=-1,a="");if(0>g_selected_row&&0!=
c)if(g_do_searchbox?0!=c&&(a="",g_inputstr_freeze=!0):g_initial_searchtext!=a?(g_inputstr_initial_from_kbdnav="",l("F4")):g_text_created_popup?(g_inputstr_initial_from_kbdnav=a,a="",l("F1")):0!=c?(g_inputstr_initial_from_kbdnav=a,a="",l("F3")):l("F2"),"none"==document.getElementById("lptabpopupformfills").style.display)c=g_selected_row=0,l("F5");else{if("none"==document.getElementById("lptabpopup").style.display){c=g_selected_row=0;a="";for(e=0;e<m.length;e++)0==m[e].id.indexOf("tdpopuprow")&&g_selected_row++;
ROW_START=g_selected_row;l("F6")}}else 0>g_selected_row&&0==c?g_initial_searchtext!=a?(g_inputstr_initial_from_kbdnav="",l("F7")):(g_inputstr_initial_from_kbdnav=a,g_text_created_popup=!0,a="",l("F8")):g_inputstr_freeze?(a="",l("F9")):""!==g_inputstr_initial_from_kbdnav&&(l("F10"),a!==g_inputstr_initial_from_kbdnav?(g_inputstr_initial_from_kbdnav="",l("SEARCH TEXT CHANGED, FILTER initial")):(a="",l("F11")));l("SEARCH string is now "+a);for(var g=e=0;g<m.length;g++)if(m[g].id&&(0==m[g].id.indexOf("tdpopuprow")||
0==m[g].id.indexOf("tdpopupffrow"))){var p="tr"+m[g].id.substr(2),p=document.getElementById(p),s=p.getAttribute("sitename"),t=p.getAttribute("username"),u=p.getAttribute("profilename");null==s&&(s="");null==t&&(t="");null==u&&(u="");0>=a.length?"none"==document.getElementById("lptabpopupformfills").style.display&&0==m[g].id.indexOf("tdpopuprow")||"none"==document.getElementById("lptabpopup").style.display&&0==m[g].id.indexOf("tdpopupffrow")?(b.push(p),unhighlight_row(p),e++):n.push(p):!h&&0==m[g].innerText.trim().toLowerCase().indexOf(a.toLowerCase())||
h&&0<=s.trim().toLowerCase().indexOf(a.toLowerCase())&&"none"==document.getElementById("lptabpopupformfills").style.display||h&&0<=t.trim().toLowerCase().indexOf(a.toLowerCase())&&"none"==document.getElementById("lptabpopupformfills").style.display||h&&0<=m[g].innerText.trim().toLowerCase().indexOf(a.toLowerCase())&&"none"==document.getElementById("lptabpopup").style.display?"none"==document.getElementById("lptabpopupformfills").style.display&&0==m[g].id.indexOf("tdpopuprow")||"none"==document.getElementById("lptabpopup").style.display&&
0==m[g].id.indexOf("tdpopupffrow")?(highlight_row(p,a),b.push(p),e++):n.push(p):n.push(p)}for(var k in n)n[k].style.display="none",g_outline_hover?(a=n[k].children[0],a.className=a.className.replace(/ ?\bshowfocus\b/,"")):n[k].className=n[k].className.replace(/ ?\bshowfocus\b/,""),unhighlight_row(n[k]),g_visual_cue_on_hover&&(0==n[k].id.indexOf("trpopuprow")?(a="expand",a=n[k].id.replace("trpopuprow",a),a=document.getElementById(a),null!=a&&(a.style.display="none")):0==n[k].id.indexOf("trpopupffrow")&&
(a="expandff",a=n[k].id.replace("trpopupffrow",a),a=document.getElementById(a),null!=a&&(a.style.display="none")));for(k in b)b[k].style.display="",g_outline_hover?(a=b[k].children[0],a.className=a.className.replace(/ ?\bshowfocus\b/,"")):b[k].className=b[k].className.replace(/ ?\bshowfocus\b/,"");if(0<=g_selected_row){g_selected_row+=c;g_selected_row>=ROW_START+e?g_selected_row=ROW_START+e-1:g_selected_row<ROW_START&&(g_selected_row=ROW_START);c=ROW_START;for(g=0;g<b.length;g++)if(b[g].id&&"none"!=
b[g].style.display){if(g_selected_row==c){if(d)k=b[g],0==k.id.indexOf("trpopuprow")&&null!=k.getAttribute("aid")?autologin(k.getAttribute("aid")):k.click();else{if(f){k=b[g];g_currenttab="more";doTitleBar(document,popup_actions_cfg.more.str);more_popupaction(document,k);return}q?togglenavbar(document):(g_outline_hover?(a=b[g].children[0],a.className+=" showfocus"):b[g].className+=" showfocus",b[g].scrollIntoView(!1),g_visual_cue_on_hover&&(0==b[g].id.indexOf("trpopuprow")?(a="expand",a=b[g].id.replace("trpopuprow",
a),a=document.getElementById(a),null!=a&&(a.style.display="")):0==b[g].id.indexOf("trpopupffrow")&&(a="expandff",a=b[g].id.replace("trpopupffrow",a),a=document.getElementById(a),null!=a&&(a.style.display=""))))}if(!g_visual_cue_on_hover)break}else g_visual_cue_on_hover&&(0==b[g].id.indexOf("trpopuprow")?(a="expand",a=b[g].id.replace("trpopuprow",a),a=document.getElementById(a),null!=a&&(a.style.display="none")):0==b[g].id.indexOf("trpopupffrow")&&(a="expandff",a=b[g].id.replace("trpopupffrow",a),
a=document.getElementById(a),null!=a&&(a.style.display="none")));c++}}g_icon_number_hint&&("sites"==g_currenttab?("none"==document.getElementById("lptabpopupformfills").style.display&&"none"==document.getElementById("lptabpopup").style.display&&(e=0),sendRequest({cmd:"popupfilliconnumber",sitenumber:e,formfillsnumber:-1})):"formfill"==g_currenttab?sendRequest({cmd:"popupfilliconnumber",formfillsnumber:e,sitenumber:-1}):sendRequest({cmd:"popupfilliconnumber",sitenumber:-1,formfillsnumbers:-1}));g_nomatches_triggers_save&&
"sites"==g_currenttab&&("sites"==g_rowtypes&&0==e&&0<countInputRows(document).sites)&&(j||savesite_popupaction_iframe(document,null,null))}}
function getInputPoll(){g_ctr_poll++;g_ischrome?chrome.extension.sendRequest({cmd:"popupfillinputget"},function(a){g_ctr_pollresponse++;if(!(null==a||null==a.inputstr)){null==g_initial_searchtext&&(g_initial_searchtext=a.inputstr);if(g_savesitesuperbox){var b=document.getElementById("superbox_savesite_txt_span");a.inputstr!=g_lastinput?null!=b&&(b.innerText=a.inputstr):a.inputstr!=g_lastinput&&b&&(b.innerText="")}(g_switchedtabs||a.inputstr!=g_lastinput||g_lastactive!=a.active||g_lastmoreopen!=a.moreopen||
g_lastshownavbar!=a.shownavbar||a.inputid!=g_lastinputid||a.choose!=g_lastchoose)&&dofilter(a.inputstr,a.inputid,a.active,a.choose,a.moreopen,SEARCH_SITE_AND_USER,a.issaveall,a.inputtype,a.shownavbar);g_lastinput=a.inputstr;g_lastinputid=a.inputid;g_lastactive=a.active;g_lastchoose=a.choose;g_lastmoreopen=a.moreopen;g_lastshownavbar=a.shownavbar;g_switchedtabs=!1}}):g_issafari&&sendRequest({cmd:"popupfillinputget"});return!1}
function askGenerate(){g_issafari?g_inline_generate?doGeneratePW(document):(sendRequest({cmd:"generate"}),closePopups()):doGeneratePW(document)}function getWindowWidth(a){a=a.innerWidth;var b=document.getElementById("_lpinvis");null==b&&(b=document.createElement("div"),b.id.left="_lpinvis",b.style.left="0px",b.style.right="0px",b.style.top="0px",b.style.height="0px",b.style.visibility="hidden",document.body.appendChild(b));0<b.offsetWidth&&(a=b.offsetWidth);document.body.removeChild(b);return a}
function doSaveIFrame(){var a=document.getElementById("password").value;g_ischrome?sendRequest({cmd:"savePassword",pass:a}):sendRequest({cmd:"savePassword",pass:a,url:g_reference_url});if(g_savesite_after_generate)if(0==countInputRows(document).sites||countInputRows(document).sites==countInputRows(document).genpw)verbose_log("doSaveIFrame: no sites exist, ask user to save generated password"),setTimeout(function(){emptyAskSave(document,a);doTitleBar(document,gs(""));siteResize(document,EMPTY_RESIZE)},
10);else if(1==countInputRows(document).sites-countInputRows(document).genpw){var b=getSingleAid();null!=b&&""!=b?(verbose_log("doSaveIFrame: user has a valid aid, asking user whether to change pw or save generated password"),setTimeout(function(){askReplacePassword(a,b,null);doTitleBar(document,gs(""));siteResize(document,CHANGE_OR_SAVE_RESIZE)},10)):(verbose_log("doSaveIFrame error: no valid aid exists, asking user to save generated password"),setTimeout(function(){emptyAskSave(document,a);doTitleBar(document,
gs(""));siteResize(document,EMPTY_RESIZE)},10))}else verbose_log("doSaveIFrame : multiple aids exist for this site "),setTimeout(function(){askReplacePassword(a,null,g_reference_url);doTitleBar(document,gs(""));siteResize(document,CHANGE_OR_SAVE_RESIZE)},10);else closePopups()}
function getGeneratePrefs(){g_ischrome?(L("IF -> BG : cmd=popupfillgetgenerateprefs"),chrome.extension.sendRequest({cmd:"popupfillgetgenerateprefs"},function(a){L("BG -> IF : response to popupfillgetgenerateprefs");null==a?verbose_log("unable to get prefs from BG"):handleGotGeneratePrefs(a.prefstr,a.genpwstr)})):g_issafari&&g_inline_generate&&(L("IF -> BG : cmd=popupfillgetgenerateprefs"),sendRequest({cmd:"popupfillgetgenerateprefs"}));return!1}
function setGeneratePrefs(a){a||(a=document);if(g_should_set_prefs&&null!=a.getElementById("length")){a=LPJSON.stringify({generate_advanced:a.getElementById("advanced").checked?1:0,generate_length:g_user_changed_length||g_slider_changed_length?a.getElementById("length").value:g_myprefs.generate_length,generate_upper:a.getElementById("upper").checked?1:0,generate_lower:a.getElementById("lower").checked?1:0,generate_digits:a.getElementById("digits").checked?1:0,generate_special:a.getElementById("special").checked?
1:0,generate_mindigits:parseInt(a.getElementById("mindigits").value),generate_ambig:a.getElementById("ambig").checked?1:0,generate_reqevery:a.getElementById("reqevery").checked?1:0,generate_pronounceable:a.getElementById("pronounceable").checked?1:0});var b=LPJSON.stringify(g_genpws);g_ischrome?chrome.extension.sendRequest({cmd:"popupfillsetgenerateprefs",prefstr:a,genpwstr:b}):sendRequest({cmd:"popupfillsetgenerateprefs",prefstr:a,genpwstr:b})}return!1}
function isEmptyObject(a){return 0===Object.keys(a).length}function defaultFrameResize(){sendRequest({cmd:"popupfillresize",width:0,height:0})}function verbose_log(a){verbose&&console_log(a)}function search_tokenize_rows(){}function search_tokenize_input(){}function emptyAskSave(a,b){null!=a&&(!g_savesitesuperbox||g_prompt_master_username)&&emptyPromptMsg(a,EMPTY_ASK_SAVE,b)}
function getAbsolutePos(a,b){if(null!=b){if("function"!=typeof b.getBoundingClientRect)return null;var c=b.getBoundingClientRect(),d,f;d="undefined"==typeof c.width?c.right-c.left:c.width;f="undefined"==typeof c.height?c.bottom-c.top:c.height;var h=a.body.getBoundingClientRect();return{left:c.left+a.body.scrollLeft-h.left,top:c.top+a.body.scrollTop-h.top,width:d,height:f}}return null}
function initSliderPos(a){var b=SLIDER_MAX_CHARS,c=SLIDER_MIN_CHARS;null==a?a=c:a>b?a=b:a<c&&(a=c);return a=Math.round(20>=a?(a-c)*(b-3*c)/(2*(20-c))+c:(a-20)*(c+(b-c)/2)/(b-20)+(b-c)/2)}
function askReplacePassword(a,b,c){hideElement(document,"lptabpopup");hideElement(document,"lptabpopupnever");hideElement(document,"lptabpopupformfills");hideElement(document,"lptabpopupgenerate");hideElement(document,"askGenerateDiv");hideElement(document,"popupcontainer");hideElement(document,"popupcontainerff");hideElement(document,"searchtab");hideElement(document,"doGenerateDiv");hideElement(document,"askMsgDiv");hideElement(document,"moreDiv");var d=null,f=["askReplacePasswordDiv","askReplacePasswordSaveDiv",
"spacerReplacePassword"];for(x in f)d=document.getElementById(f[x]),null!=d&&d.parentNode.removeChild(d);d=document.createElement("div");d.id="askReplacePasswordDiv";d.innerHTML='<table style="padding-bottom:20px"><td valign="top" class="icobullet">'+gearIco()+'</td><td><span class="divtext savegendiv"  >'+gs("A new password has been created.  Would you like LastPass to remember this as a password change for this site?")+"</span></td></table>";g_underline_text_actions&&(d.className+=" underline");
d.style.cursor="pointer";null==b&&null!=c?d.addEventListener("click",function(){replacepasswordchooser_popupaction(a,c)},!1):d.addEventListener("click",function(){replacepassword_popupaction(a,b)},!1);document.body.appendChild(d);d=document.createElement("div");d.id="askReplacePasswordSaveDiv";d.innerHTML='<table><td valign="top" class="icobullet">'+plusIco()+'</td><td><span class="divtext savegendiv" >'+gs("Save this password as a new entry?")+"</span></td></table>";g_underline_text_actions&&(d.className+=
" underline");d.style.cursor="pointer";d.addEventListener("click",function(){savesite_popupaction_iframe(document,event)},!1);document.body.appendChild(d);g_currenttab="savesite";setActiveTab(document);return!1}function replacepassword_popupaction(a,b){var c=LPJSON.stringify({sitecount:1,newpw:a,singleaid:b});sendRequest({cmd:"changepw",notificationdata:c});closePopups()}
function replacepasswordchooser_popupaction(a,b){var c=LPJSON.stringify({sitecount:2,newpw:a,tld:lp_gettld_url(b)});sendRequest({cmd:"changepw",notificationdata:c});closePopups()}function getSingleAid(){var a;a=document.getElementsByTagName("td");for(var b=0;b<a.length;b++)if(a[b].id&&(0==a[b].id.indexOf("tdpopuprow")&&0!=a[b].innerText.trim().indexOf(gs("Generated Password for")))&&null!=a[b].getAttribute("aid"))return a=a[b].getAttribute("aid");return null}
function gearIco(){return'<IMG SRC="'+gear_png+'" height=16 width=16 alt="*" style="background: #d32d27;">'}function plusIco(){return'<IMG SRC="'+plus_png+'" height=16 width=16 alt="*" style="background: #d32d27;">'}
var gear_png="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH3QYDEjoOIjJ7fwAABA9JREFUSMe1V11oXUUQ/vYkKTX3em3+pNaq2FRf+iQURYpUrAhW+6BCBUWkoU8F0QoK/rz0yaIoImKLiqBFJLaogUIRH7Q+qS0qShvENqQFrYknzSHk56x3Zz4fnJNuDjfJzSUOLLszO+f75uzOzOE4LCEkEwAJAHHOEf+HqGpMCJLlINxS+y2TNgIiuZfkt6p6Z4O91SG3ANaSfERVNxr4D6pKkq/Y/h0k747JV0VIPkOSqvozyXdJ5kZ8QVXfIpmpKlV162rf88MkZw2cRkoLplieU9Uby3nRKmGcOF8ZyYSdwA6Sh/U/IckDjRKuFdLE5l0kj5GctTfbU7qGD81+keSbqro9KrmW7rXd5lO8ItMkbyj5DcRHT/JEXBGNsnyxaoE1BzXgQyS/AyAkKwC2l4h3OOdAMgNwjORBAEiSBM45AHA2XwFPkqXLrtiwCL+xZLpM8imS2yyjiwR72Xx3kjxD8kgJ6z2SZ1R1b9PJZ4k02SCT4/VJkltU9Y8o85+w5x8qXcf6ZolfikpmSFXrpqeqejQK6naSRyKCy6r6har+XRCr6slmOyRI1kjuU9V+008b8Kum30Nym60/il+t9KYk+XmEu7YovbGxMQCAKyJxzqGcHKr6LIA9AJ4EsAHAAICvAWwEsA9AFcAIgEHn3G8kNwN4FMAtAHIAbwOYtkQ9niTJG0t+nQoZHh4GAIhIp4ikIjLf0USEIjIkIgvuMYTQLSKDDXwnmrpvEYmDWicilwxAbf5FVa823+dF5LiIvGBHu0ZETplfMUZbajQhhOtDCJ8UQCGE54z09RLBIfN/OvL9LISwaaWEqNfrsX42hMAQwm7TR00vxojZHzT9vKpeZTYXQpjvXMsSd3R0AADq9foDJDdYN7rGjvVC3DJJjpl9nenrRWQXALS3tzN+iUXFew8AyPM88d6/471nNL40ny3e+5+895n3/lfv/VazD5X8Dzd9zHmeF/O1eZ4zz3POzc0xWh+Igry5WM/Nzb3YwN/H2Et+T6enp1GtVgEAs7OzgwB2W90SQL+5HQXwPoDfAWyyun/c9kYBiPme6Ozs3NkUcSmIXgCbVfXHJEm6AXwK4K7I5R8AayL9NID7VXUqSZLbAFysVquXis325QhnZmYAAJVKJQWQmvmvqamp8yXittKjo7VarfD/voSFpMmPxwI9y7LrVPVeVYWNjwHcqqofRLb7sizrXQxzWeJKpTJ/z1EgXlVHjGBSRPbXarUREdmvqn+a/RzJvIxVqVRW3r2yLJtfp2l6U5qmB9M0HYh90jR9LE3T19I07W/03IqTCwAmJydBEt3d3Qvs4+PjaGtrg6qir68vDgLOOSRJgq6urtaJY5mYmACANpLs7e3VyJ4Yrvb09Cz6q/Ev9XO9fBPKbB4AAAAASUVORK5CYII=",plus_png=
"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAMAAAAM7l6QAAACGVBMVEUAAADi5+ni5+ni5+ni5+ni5+ni5+ni5+ni5+ni5+ni5+ni5+ni5+ni5+ni5+ni5+ni5+ni5+ni5+ni5+ni5+ni5+ni5+ni5+ni5+ni5+ni5+ni5+ni5+ni5+ni5+ni5+ni5+ni5+ni5+ni5+ni5+ni5+ni5+ni5+ni5+ni5+ni5+ni5+ni5+ni5+ni5+ni5+ni5+ni5+ni5+ni5+ni5+ni5+ni5+ni5+ni5+ni5+ni5+ni5+ni5+ni5+ni5+ni5+ni5+ni5+ni5+ni5+ni5+ni5+ni5+ni5+ni5+ni5+ni5+ni5+ni5+ni5+ni5+ni5+ni5+ni5+ni5+ni5+ni5+ni5+ni5+ni5+ni5+ni5+ni5+ni5+ni5+ni5+ni5+ni5+ni5+ni5+ni5+ni5+ni5+ni5+ni5+ni5+ni5+ni5+ni5+ni5+ni5+ni5+ni5+ni5+ni5+ni5+ni5+ni5+ni5+ni5+ni5+ni5+ni5+ni5+ni5+ni5+ni5+ni5+ni5+ni5+ni5+ni5+ni5+ni5+ni5+ni5+ni5+ni5+ni5+ni5+ni5+ni5+ni5+ni5+ni5+ni5+ni5+ni5+ni5+ni5+ni5+ni5+ni5+ni5+ni5+ni5+ni5+ni5+ni5+ni5+ni5+ni5+ni5+ni5+ni5+ni5+ni5+ni5+ni5+ni5+ni5+ni5+ni5+ni5+ni5+ni5+ni5+ni5+ni5+ni5+ni5+kV6aSVAAAAsnRSTlMAAAQbSXeZpph2SBkDBTOHzu77+syFMiGL5f785IgfAUPH89B7aHyb0fT9xEBT365OGFCx3U9G4NRaDQ5g295EJ8U0PcrJJQjWNjrYkwZC7Ffw6j8HnBqdKztd6z7aKGT1tAxi+beWfVyAlPdYHEGMW/iz8fbyw2rGvVF+MbmicXSfo+deKjeyLn9ZE7oXtREUFp7jcKotrGwCCoLXINkJC9MsX9XoS8Lv6b9rwGkVjdxMbFO3IAAAAjBJREFUeF5t0ulXElEYBvD7UoKhZgxWAiVILs0EIklWLlGUWRYgamaUS4oiWZZBK5i02qLtq+22KC1Wz18YDtyk8n565v2d85x3zr2MH1IsWZqlVKmyl6lzcolPOeYtz1+hEQBAqylYuSqPMpFWF+r0AGAwAIB+zdoiIq5kNBUn0bxOWVJaWla+XgSkDRYjcbVWAKKt0q6g+R1yNlaJgGNTyomqNwNbttbwOqLaunpgm1Me0PYCYIcrhbxv5y6gYXeSqVEJ7NnLlRc07QP2u4mRxwuNleuCN/vQ0kqs7QCgdKeU2k0eezq2HQSy3azDgZZDfCm/93Azz0e86Oxi3T042su5Twj4Odf0Q6xjA0CQMniQM4WAY6wfQ8fnlU6YnMMnDUL+sNPTLg9OjeA0K4bPKXOfJuyLABFf2OuXWX0GZ1kDfB6Zz0lIH6Fb5uowzrMLEC/K7IqGolWSwRYNBWMyW3swyi5BP7b4anHgMotrcaVtMW5UITDGmq7C0cW5Wwhc43y9ArobrHYcUokx5RQLlt1MR+MtCbZeRoND6Iz9fyUuByK3idGdCcA2+S/bx4G795JMTh0M5ff/cnrwUMIjy3wn5T4WITzpMGY8zafPDDA/fyFPaOqlCP2reJGCZFS8znqjhzn6lv/Du3gLoH0/4G+dnrZ8yP6oBT6NTS205X2e0QIYmU0kZgMAAl/UchV3yvk6M6uHfCTNt++TxJWvM1f5Y+JnIlE/WvhrzsjxN5a5s8bBHOqKAAAAAElFTkSuQmCC";
function handleGotGeneratePrefs(a,b){g_myprefs=LPJSON.parse(a);var c=LPJSON.parse(b);if(null!=c&&!isEmptyObject(c)){g_genpws=[];for(var d in c)c.hasOwnProperty(d)&&g_genpws.push(c[d])}}
function doInit(a,b,c,d,f,h,j,e){document.body.innerHTML=d;getGeneratePrefs();sizeTables(window);g_reference_url=a;g_can_copy_clipboard=f;"undefined"!=typeof c&&(g_ask_generate=0==g_ask_generate.length?0:c);"undefined"!=typeof h&&(g_ask_save=0==g_ask_save.length?0:h);"undefined"!=typeof j&&(g_username=j);"undefined"!=typeof e&&(g_inputtype=e);g_rowtypes_initial=g_rowtypes=b;if(null==g_rowtypes||0>=g_rowtypes.length)g_rowtypes="sites";g_initial_searchtext=null;setTimeout(function(){setup_event_handlers(document,
window)},0);"ask_generate"==g_rowtypes||1==g_ask_generate?(setTimeout(function(){askGenerate()},0),g_currenttab="generate",doTitleBar(document,popup_actions_cfg[g_currenttab].str),doSuperBox(document)):1==g_ask_save?(g_currenttab="savesite",doTitleBar(document,popup_actions_cfg[g_currenttab].str),savesite_popupaction_iframe(document),doSuperBox(document)):"formfills"==g_rowtypes?(formfillprofile_popupaction(),g_currenttab="formfill",doTitleBar(document,popup_actions_cfg[g_currenttab].str),doSuperBox(document)):
"sites"==g_rowtypes&&(g_currenttab="sites",hideElement(document,"popupcontainerff"),0===countInputRows(document).sites?(null!=e&&"password"==e?emptyAskSave(document):emptyAskFill(document),doTitleBar(document,gs("")),siteResize(document,EMPTY_RESIZE),doSuperBox(document)):(doTitleBar(document,popup_actions_cfg[g_currenttab].str),doSimpleBar(document,CREATE_OR_MOVE_SIMPLEBAR),g_do_searchbox&&countInputRows(document).sites>SEARCH_BOX_ROW_THRES?doSearchBox(document,gs("Sites")):hideElement(document,
"searchtab"),doSuperBox(document),siteResize(document)));popup_show_menu_expand_visual_cue&&do_inject_visual_cues(document);setActiveTab(document);g_switchedtabs=!1;document.addEventListener("keydown",function(a){keypress_handler(a)},!1)}function copyusername_popupaction(a){sendRequest({cmd:"copyusername",aid:a});closePopups();return!1}function copypassword_popupaction(a){sendRequest({cmd:"copypassword",aid:a});closePopups();return!1}
function copyurl_popupaction(a){sendRequest({cmd:"copyurl",aid:a});closePopups();return!1}function edit_popupaction(a,b){null!=a?sendRequest({cmd:"editaid",aid:a}):null!=b?sendRequest({cmd:"editprofile",ffid:b}):verbose("panic: no aid and no ffid, unable to proceed");closePopups();return!1}
function delete_popupaction(a,b,c,d){if(d)return null!=b?sendRequest({cmd:"deleteaid",aid:b}):null!=c?sendRequest({cmd:"deleteformfill",ffid:c}):verbose("panic: no aid and no ffid, unable to proceed"),closePopups(),!1;a.getElementById("moreDiv").className="moreMsg";a.getElementById("moreDiv").innerHTML="<p>Are you sure?<p><button id='deleteyes'>Yes</button><button id='deleteno'>No</button>";a.getElementById("deleteyes").addEventListener("click",function(){delete_popupaction(a,b,c,!0)});a.getElementById("deleteno").addEventListener("click",
function(){var d=a.getElementById("moreDiv");d.parentNode.removeChild(d);more_popupaction(a,null,b,c)})}function moreResize(a,b){var c=0;a.getElementById("lptabpopuptitle");a.getElementById("lptabpopupnavbar");a.getElementById("simplebar");g_do_simplebar&&(c=20);c=Math.max(TABLE_ROW_HEIGHT*b+TITLE_BAR_HEIGHT+NAV_BAR_HEIGHT+c,180);c=Math.min(c,400);sendRequest({cmd:"popupfillresize",width:0,height:c})}
function highlight_row(a,b){if(!(null==a||null==b||0>=b.length)){var c=b=of(b);b=b.replace(/\./g,"\\.");var d=a.getAttribute("sitename");a.getAttribute("username");a.getAttribute("profilename");null==d&&(d="");var f="td"+a.id.substr(2),h=document.getElementById(f),f=null,j,e=null;for(j in h.childNodes)if("SPAN"==h.childNodes[j].tagName){e=h.childNodes[j];f=e.innerText;break}null!=f&&0<f.length&&(j=RegExp(b,"gi"),null==f.match(j)&&(f=f+" ("+d+")"),f=f.replace(j,'<SPAN CLASS="popcell highlight">'+of(c)+
"</SPAN>"),e.innerHTML=f)}}
function unhighlight_row(a){if(null!=a){var b=a.getAttribute("sitename"),c=a.getAttribute("username"),d=a.getAttribute("profilename");null==b&&(b="");null==c&&(c="");null==d&&(d="");if(g_creditcard_profile_annotate){var f=a.getAttribute("formtype");null==f&&(f="0")}a="td"+a.id.substr(2);a=document.getElementById(a);var h,j=null;for(h in a.childNodes)if("SPAN"==a.childNodes[h].tagName){j=a.childNodes[h];0==a.id.indexOf("tdpopuprow")?j.innerHTML=0>=c.length?ofa(b):ofa(c):0==a.id.indexOf("tdpopupffrow")&&
(j.innerHTML=g_creditcard_profile_annotate&&"1"===f?ofa(d)+"&nbsp;&nbsp;&nbsp;("+gs("Credit Card")+")":ofa(d));break}}}function pollSaveChrome(a){chrome.extension.sendRequest({cmd:"popupfillsaveget"},function(b){null!=b&&(null!=b.formdata2?populateSave(b):null!=b.close?closePopups():5>a&&(a++,setTimeout(function(){pollSaveChrome(a)},100)))})}
function do_never_kbd_event(a,b,c,d,f){if(null==b||""===b)b=0;0<b&&0===g_selected_never_row&&(g_selected_never_row=1);0>b&&1===g_selected_never_row&&(g_selected_never_row=0);f&&g_hide_navbar&&togglenavbar(a);0===g_selected_never_row&&c&&neverpage_handler();1===g_selected_never_row&&c&&neverdomain_handler()}
function do_more_kbd_event(a,b,c,d,f){var h=1,j=2,e=3,q=4,l=-99,r=-98;g_more_close_on_cancel&&g_more_enable_return?(l=5,q=r=6):g_more_close_on_cancel&&!g_more_enable_return?q=l=5:!g_more_close_on_cancel&&g_more_enable_return&&(q=r=5);if(null!=g_more_submenu_ffid||null!=g_more_submenu_aid&&!g_can_copy_clipboard)h=-97,j=-96,e=-95,q-=3,l-=3,r-=3;if(null==b||""===b)b=0;-1==g_selected_more_row&&d&&(g_selected_more_row=0);f&&g_hide_navbar&&togglenavbar(a);g_selected_more_row+=b;0>g_selected_more_row?g_selected_more_row=
0:g_selected_more_row>q&&(g_selected_more_row=q);if(c)switch(g_selected_more_row){case 0:edit_popupaction(g_more_submenu_aid,g_more_submenu_ffid);break;case h:copyusername_popupaction(g_more_submenu_aid);break;case j:copypassword_popupaction(g_more_submenu_aid);break;case e:copyurl_popupaction(g_more_submenu_aid);break;case 4:delete_popupaction(g_more_submenu_aid,g_more_submenu_ffid);break;case r:g_more_enable_return&&(null!=g_more_submenu_aid?sites_popupaction():null!=g_more_submenu_ffid?formfillprofile_popupaction():
closePopups());break;case l:g_more_close_on_cancel&&closePopups()}}var EMPTY_ASK_SAVE=1,EMPTY_FILL_MASTER_USERNAME=2,USE_LP_USERNAME=!0,USE_PWFORM_USERNAME=!1;
function emptyPromptMsg(a,b,c){if(null==a||b!=EMPTY_ASK_SAVE&&b!=EMPTY_FILL_MASTER_USERNAME)return!1;hideElement(a,"lptabpopup");hideElement(a,"lptabpopupnever");hideElement(a,"lptabpopupformfills");hideElement(a,"lptabpopupgenerate");hideElement(a,"askGenerateDiv");hideElement(a,"popupcontainer");hideElement(a,"popupcontainerff");hideElement(a,"searchtab");hideElement(a,"doGenerateDiv");hideElement(a,"moreDiv");var d=a.getElementById("askMsgDiv");null!=d&&d.parentNode.removeChild(d);d=a.createElement("div");
d.id="askMsgDiv";switch(b){case EMPTY_FILL_MASTER_USERNAME:d.innerHTML=gs("Fill with ")+of(g_username)+"?";d.addEventListener("click",function(){savesite_popupaction_iframe(a,event,USE_LP_USERNAME,null,g_username)},!1);break;case EMPTY_ASK_SAVE:d.innerHTML=gs("Save Password to Vault?"),d.addEventListener("click",function(){savesite_popupaction_iframe(a,event,USE_PWFORM_USERNAME,c,null)},!1)}d.className="divtext";g_underline_text_actions&&(d.className+=" underline");d.style.cursor="pointer";a.body.appendChild(d);
g_currenttab="sites";setActiveTab(a);doSimpleBar(a,CREATE_OR_MOVE_SIMPLEBAR);return!1}function emptyAskFill(a){null!=a&&emptyPromptMsg(a,EMPTY_FILL_MASTER_USERNAME)}
function translationInit(a,b,c,d,f,h,j,e){try{"undefined"==typeof translations&&(translations={}),"undefined"==typeof translations["en-US"]&&(translations["en-US"]={}),translations["en-US"].ff_username_regexp=d,translations["en-US"].ff_firstname_regexp=a,translations["en-US"].ff_middlename_regexp=b,translations["en-US"].ff_lastname_regexp=c,translations["en-US"].ff_email_regexp=f,translations["en-US"].ff_zip_regexp=h,translations["en-US"].ff_country_regexp=j,translations["en-US"].ff_currpass_regexp=
e}catch(q){}}
function lpgs(a,b){var c="undefined"==typeof b||null==b?"":b;if("undefined"!=typeof lpgscache[c+a]||"undefined"==typeof lpgslocales[c]&&0==a.indexOf("ff_")&&(ApplyOverrides(c),"undefined"!=typeof lpgscache[c+a]))return lpgscache[c+a];if("undefined"!=typeof translations){if("undefined"!=typeof b&&b&&"undefined"!=typeof translations[b]&&"undefined"!=typeof translations[b][a])return translations[b][a];if("undefined"!=typeof translations["en-US"]&&"undefined"!=typeof translations["en-US"][a])return translations["en-US"][a]}return"undefined"!=typeof lpgscache["en-US"+
a]?lpgscache["en-US"+a]:a};
